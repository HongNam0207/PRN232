@page
@model dynamic
@{
    ViewData["Title"] = "Chỉnh sửa thành viên";
}

<div class="container mt-4" style="max-width: 500px;">
    <h3 class="mb-3">Chỉnh sửa quan hệ</h3>

    <form id="editForm">
        <label class="form-label">Quan hệ</label>
        <select id="relationship" class="form-select mb-3">
            <option value="Cha">Cha</option>
            <option value="Mẹ">Mẹ</option>
            <option value="Con">Con</option>
            <option value="Ông">Ông</option>
            <option value="Bà">Bà</option>
            <option value="Thành viên">Thành viên</option>
        </select>

        <button class="btn btn-primary w-100">Lưu</button>
    </form>
</div>

<script>
    const token = localStorage.getItem("token");
    const memberId = new URLSearchParams(window.location.search).get("memberId");

    document.getElementById("editForm").addEventListener("submit", async e => {
        e.preventDefault();

        await fetch(`https://localhost:7145/api/FamilyMembers/${memberId}`, {
            method: "PUT",
            headers: { "Content-Type": "application/json", "Authorization": `Bearer ${token}` },
            body: JSON.stringify({ relationship: document.getElementById("relationship").value })
        });

        window.location.href = "/Members/Index";
    });
</script>
